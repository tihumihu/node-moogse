.\" Man page generated from reStructuredText.
.
.TH "MONGOTOP" "1" "March 18, 2014" "2.6" "mongodb-manual"
.SH NAME
mongotop \- MongoDB Activity Monitor
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fBmongotop\fP provides a method to track the amount of time a
MongoDB instance spends reading and writing data. \fBmongotop\fP
provides statistics on a per\-collection level. By default,
\fBmongotop\fP returns values every second.
.sp
\fBSEE ALSO:\fP
.INDENT 0.0
.INDENT 3.5
For more information about monitoring MongoDB, see
http://docs.mongodb.org/manual/administration/monitoring\&.
.sp
For additional background on various other MongoDB status outputs
see:
.INDENT 0.0
.IP \(bu 2
http://docs.mongodb.org/manual/reference/command/serverStatus
.IP \(bu 2
http://docs.mongodb.org/manual/reference/command/replSetGetStatus
.IP \(bu 2
http://docs.mongodb.org/manual/reference/command/dbStats
.IP \(bu 2
http://docs.mongodb.org/manual/reference/command/collStats
.UNINDENT
.sp
For an additional utility that provides MongoDB metrics
see \fBmongostat\fP\&.
.UNINDENT
.UNINDENT
.SH OPTIONS
.INDENT 0.0
.TP
.B mongotop
.UNINDENT
.INDENT 0.0
.TP
.B mongotop
.UNINDENT
.INDENT 0.0
.TP
.B \-\-help, \-h
Returns information on \fBmongotop\fP options and usage.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-verbose, \-v
Increases the amount of internal reporting returned on standard output
or in log files. Increase the verbosity with the \fB\-v\fP form by
including the option multiple times, (e.g. \fB\-vvvvv\fP\&.)
.UNINDENT
.INDENT 0.0
.TP
.B \-\-quiet
Runs \fBmongotop\fP in a quiet mode that attempts to limit the amount of
output. This option suppresses:
.INDENT 7.0
.IP \(bu 2
output from \fIdatabase commands\fP
.IP \(bu 2
replication activity
.IP \(bu 2
connection accepted events
.IP \(bu 2
connection closed events
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-version
Returns the \fBmongotop\fP release number.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-host <hostname><:port>, \-h
Specifies a resolvable hostname for the \fBmongod\fP to which to
connect. By default \fBmongotop\fP attempts to connect to a MongoDB instance
running on the localhost on port number \fB27017\fP\&.
.sp
To connect to a replica set, specify the replica set seed name and the
seed list of set members. Use the following format:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
<replica_set_name>/<hostname1><:port>,<hostname2:<port>,...
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
You can always connect directly to a single MongoDB instance by
specifying the host and port number directly.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-port <port>
Specifies the port number when the MongoDB instance is not running on the
standard port of \fB27017\fP\&. You may also specify the port number
using the \fB\-\-host\fP option.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ipv6
Enables IPv6 support, which allows \fBmongotop\fP to connect to the MongoDB
instance using an IPv6 network. All MongoDB programs and processes,
including \fBmongotop\fP, disable IPv6 support by default.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-ssl
New in version 2.6.

.sp
Enables connection to a \fBmongod\fP or \fBmongos\fP that has
SSL support enabled.
.sp
The default distribution of MongoDB does not contain support for SSL.
For more information on MongoDB and SSL, see http://docs.mongodb.org/manual/tutorial/configure\-ssl\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCAFile <filename>
New in version 2.6.

.sp
Specifies the \fB\&.pem\fP file that contains the root certificate chain
from the Certificate Authority. Specify the file name of the
\fB\&.pem\fP file using relative or absolute paths.
.sp
The default distribution of MongoDB does not contain support for SSL.
For more information on MongoDB and SSL, see http://docs.mongodb.org/manual/tutorial/configure\-ssl\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslPEMKeyFile <filename>
New in version 2.6.

.sp
Specifies the \fB\&.pem\fP file that contains both the SSL certificate
and key. Specify the file name of the \fB\&.pem\fP file using relative
or absolute paths.
.sp
This option is required when using the \fI\%\-\-ssl\fP option to connect
to a \fBmongod\fP or \fBmongos\fP that has
\fBsslCAFile\fP enabled \fIwithout\fP
\fBsslWeakCertificateValidation\fP\&.
.sp
The default distribution of MongoDB does not contain support for SSL.
For more information on MongoDB and SSL, see http://docs.mongodb.org/manual/tutorial/configure\-ssl\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslPEMKeyPassword <value>
New in version 2.6.

.sp
Specifies the password to de\-crypt the certificate\-key file (i.e.
\fI\%\-\-sslPEMKeyFile\fP). Use \fI\%\-\-sslPEMKeyPassword\fP only if
the certificate\-key file is encrypted. In all cases, \fBmongotop\fP will
redact the password from all logging and reporting output.
.sp
If the private key in the PEM file is encrypted and you do not specify
\fI\%\-\-sslPEMKeyPassword\fP, \fBmongotop\fP will prompt for a passphrase.
See \fIssl\-certificate\-password\fP\&.
.sp
The default distribution of MongoDB does not contain support for SSL.
For more information on MongoDB and SSL, see http://docs.mongodb.org/manual/tutorial/configure\-ssl\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslCRLFile <filename>
New in version 2.6.

.sp
Specifies the \fB\&.pem\fP file that contains the Certificate Revocation
List. Specify the file name of the \fB\&.pem\fP file using relative or
absolute paths.
.sp
The default distribution of MongoDB does not contain support for SSL.
For more information on MongoDB and SSL, see http://docs.mongodb.org/manual/tutorial/configure\-ssl\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslAllowInvalidCertificates
New in version 2.6.

.sp
Bypasses the validation checks for server certificates and allows
the use of invalid certificates. When using the
\fBsslAllowInvalidCertificates\fP setting, MongoDB logs as a
warning the use of the invalid certificate.
.sp
The default distribution of MongoDB does not contain support for SSL.
For more information on MongoDB and SSL, see http://docs.mongodb.org/manual/tutorial/configure\-ssl\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sslFIPSMode
New in version 2.6.

.sp
Directs \fBmongotop\fP to use the FIPS mode of the installed OpenSSL
library. Your system must
have a FIPS compliant OpenSSL library to use \fI\%\-\-sslFIPSMode\fP\&.
.sp
The default distribution of MongoDB does not contain support for SSL.
For more information on MongoDB and SSL, see http://docs.mongodb.org/manual/tutorial/configure\-ssl\&.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-username <username>, \-u
Specifies a username with which to authenticate to a MongoDB database
that uses authentication. Use in conjunction with the \fB\-\-password\fP and
\fB\-\-authenticationDatabase\fP options.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-password <password>, \-p
Specifies a password with which to authenticate to a MongoDB database
that uses authentication. Use in conjunction with the \fB\-\-username\fP and
\fB\-\-authenticationDatabase\fP options.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-authenticationDatabase <dbname>
New in version 2.4.

.sp
Specifies the database that holds the user\(aqs credentials.
If you do not specify an authentication database, \fBmongotop\fP assumes
that the database specified as the argument to the \fI\-\-db\fP option
holds the user\(aqs credentials.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-authenticationMechanism <name>
New in version 2.4.

.sp
Specifies the authentication mechanism. By default, the authentication
mechanism is \fBMONGODB\-CR\fP, which is the MongoDB challenge/response
authentication mechanism. In MongoDB Enterprise, \fBmongotop\fP also includes
support for \fBGSSAPI\fP to handle Kerberos authentication. See
http://docs.mongodb.org/manual/tutorial/control\-access\-to\-mongodb\-with\-kerberos\-authentication
for more information about Kerberos authentication.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-locks
Toggles the mode of \fBmongotop\fP to report on use of per\-database
\fIlocks\fP\&. These data are useful for measuring concurrent
operations and lock percentage.
.UNINDENT
.INDENT 0.0
.TP
.B <sleeptime>
The final argument is the length of time, in seconds, that
\fBmongotop\fP waits in between calls. By default \fBmongotop\fP returns
data every second.
.UNINDENT
.SH FIELDS
.sp
\fBmongotop\fP returns time values specified in milliseconds
(ms.)
.sp
\fBmongotop\fP only reports active namespaces or databases,
depending on the \fI\%\-\-locks\fP option. If you don\(aqt see a database
or collection, it has received no recent activity. You can issue a
simple operation in the \fBmongo\fP shell to generate activity to
affect the output of \fBmongotop\fP\&.
.INDENT 0.0
.TP
.B mongotop.ns
Contains the database namespace, which combines the database name
and collection.
.sp
Changed in version 2.2: If you use the \fI\%\-\-locks\fP, the \fBns\fP field does not
appear in the \fBmongotop\fP output.

.UNINDENT
.INDENT 0.0
.TP
.B mongotop.db
New in version 2.2.

.sp
Contains the name of the database. The database named \fB\&.\fP refers
to the global lock, rather than a specific database.
.sp
This field does not appear unless you have invoked
\fBmongotop\fP with the \fI\%\-\-locks\fP option.
.UNINDENT
.INDENT 0.0
.TP
.B mongotop.total
Provides the total amount of time that this \fBmongod\fP spent
operating on this namespace.
.UNINDENT
.INDENT 0.0
.TP
.B mongotop.read
Provides the amount of time that this \fBmongod\fP spent
performing read operations on this namespace.
.UNINDENT
.INDENT 0.0
.TP
.B mongotop.write
Provides the amount of time that this \fBmongod\fP spent
performing write operations on this namespace.
.UNINDENT
.INDENT 0.0
.TP
.B mongotop.<timestamp>
Provides a time stamp for the returned data.
.UNINDENT
.SH USE
.sp
By default \fBmongotop\fP connects to the MongoDB instance
running on the localhost port \fB27017\fP\&. However, \fBmongotop\fP can optionally
connect to remote \fBmongod\fP
instances. See the \fI\%mongotop options\fP for more
information.
.sp
To force \fBmongotop\fP to return less frequently specify a number, in
seconds at the end of the command. In this example, \fBmongotop\fP will
return every 15 seconds.
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongotop 15
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
This command produces the following output:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
connected to: 127.0.0.1

                    ns       total        read       write           2012\-08\-13T15:45:40
test.system.namespaces         0ms         0ms         0ms
  local.system.replset         0ms         0ms         0ms
  local.system.indexes         0ms         0ms         0ms
  admin.system.indexes         0ms         0ms         0ms
                admin.         0ms         0ms         0ms

                    ns       total        read       write           2012\-08\-13T15:45:55
test.system.namespaces         0ms         0ms         0ms
  local.system.replset         0ms         0ms         0ms
  local.system.indexes         0ms         0ms         0ms
  admin.system.indexes         0ms         0ms         0ms
                admin.         0ms         0ms         0ms
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To return a \fBmongotop\fP report every 5 minutes, use the
following command:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
mongotop 300
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To report the use of per\-database locks, use \fImongotop \-\-locks\fP,
which produces the following output:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ mongotop \-\-locks
connected to: 127.0.0.1

                  db       total        read       write          2012\-08\-13T16:33:34
               local         0ms         0ms         0ms
               admin         0ms         0ms         0ms
                   .         0ms         0ms         0ms
.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHOR
MongoDB Documentation Project
.SH COPYRIGHT
2011-2014, MongoDB, Inc.
.\" Generated by docutils manpage writer.
.
